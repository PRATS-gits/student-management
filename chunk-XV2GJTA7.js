import{a as W}from"./chunk-QJIBU3BZ.js";import{a as Y}from"./chunk-2ZVJAC5A.js";import{a as z,b as d,c as U,d as Z,f as H,h as X,i as J,j as K,l as Q,n as te}from"./chunk-R3XHQFXV.js";import{a as ee}from"./chunk-OTWRRM26.js";import{a as q,b as R,c as L,d as A,e as B,f as P}from"./chunk-S4B2MDIS.js";import{e as $}from"./chunk-ES3DDTL4.js";import{$a as N,Gb as j,Hb as b,Ja as S,La as l,Lb as G,N as w,O as M,Oa as k,Pa as E,Qa as F,Ra as y,Sa as o,Ta as r,Ua as c,X as f,Ya as v,Za as _,_a as I,fa as D,fb as s,gb as g,h as T,hb as h,ib as O,jb as C,la as V,wa as a,xa as u}from"./chunk-XBW5HTEE.js";var ne=["*"],re=(()=>{class i{constructor(){this.disabled=!1,this.className="",this.value="",this.valueChange=new V,this.onChange=()=>{},this.onTouched=()=>{}}getSelectClasses(){return`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pr-8 ${this.className}`}onValueChange(e){let t=e.target;this.value=t.value,this.onChange(this.value),this.valueChange.emit(this.value)}writeValue(e){this.value=e||""}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=f({type:i,selectors:[["app-select"]],inputs:{disabled:"disabled",className:"className",value:"value"},outputs:{valueChange:"valueChange"},standalone:!0,features:[O([{provide:z,useExisting:w(()=>i),multi:!0}]),C],ngContentSelectors:ne,decls:6,vars:4,consts:[[1,"relative"],[3,"change","blur","value","disabled"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-2","pointer-events-none"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"text-muted-foreground"],["d","m6 9 6 6 6-6"]],template:function(t,n){t&1&&(I(),o(0,"div",0)(1,"select",1),v("change",function(x){return n.onValueChange(x)})("blur",function(){return n.onTouched()}),N(2),r(),o(3,"div",2),D(),o(4,"svg",3),c(5,"path",4),r()()()),t&2&&(a(),k(n.getSelectClasses()),l("value",n.value)("disabled",n.disabled))},dependencies:[b],styles:["[_nghost-%COMP%]{display:block}select[_ngcontent-%COMP%]{appearance:none;background-image:none;cursor:pointer;transition:all .2s ease}select[_ngcontent-%COMP%]:focus{outline:none;border-color:hsl(var(--ring));box-shadow:0 0 0 2px rgba(var(--ring),.3)}"]})}}return i})(),oe=(()=>{class i{constructor(){this.value="",this.disabled=!1}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=f({type:i,selectors:[["app-option"]],inputs:{value:"value",disabled:"disabled"},standalone:!0,features:[C],ngContentSelectors:ne,decls:2,vars:2,consts:[[3,"value","disabled"]],template:function(t,n){t&1&&(I(),o(0,"option",0),N(1),r()),t&2&&l("value",n.value)("disabled",n.disabled)},dependencies:[b],encapsulation:2})}}return i})();var ae=(()=>{class i{constructor(){}rollNumberValidator(){return e=>{let t=e.value;return t==null||t===""?null:isNaN(t)||t<=0?{invalidRollNumber:!0}:null}}collegeEmailValidator(){return e=>{let t=e.value;return t?/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)?null:{invalidEmail:!0}:null}}getErrorMessage(e,t){if(!e||!e.errors||!e.touched)return"";if(e.hasError("required"))return`${t} is required`;if(e.hasError("invalidRollNumber"))return"Roll number must be a positive number";if(e.hasError("email")||e.hasError("invalidEmail"))return"Please enter a valid email address";if(e.hasError("minlength")){let n=e.errors.minlength?.requiredLength;return`${t} must be at least ${n} characters`}if(e.hasError("maxlength")){let n=e.errors.maxlength?.requiredLength;return`${t} cannot exceed ${n} characters`}return"Invalid input"}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=M({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function le(i,m){if(i&1&&(o(0,"p",22),s(1),r()),i&2){let e=_();a(),h(" ",e.getErrorMessage("name")," ")}}function de(i,m){if(i&1&&(o(0,"app-option",10),s(1),r()),i&2){let e=m.$implicit;l("value",e),a(),g(e)}}function me(i,m){if(i&1&&(o(0,"app-option",10),s(1),r()),i&2){let e=m.$implicit;l("value",e),a(),g(e)}}function pe(i,m){if(i&1&&(o(0,"p",22),s(1),r()),i&2){let e=_();a(),h(" ",e.getErrorMessage("rollNo")," ")}}function ue(i,m){if(i&1&&(o(0,"app-option",10),s(1),r()),i&2){let e=m.$implicit;l("value",e),a(),g(e)}}function ce(i,m){if(i&1&&(o(0,"p",22),s(1),r()),i&2){let e=_();a(),h(" ",e.getErrorMessage("email")," ")}}var Oe=(()=>{class i{constructor(e,t,n,p,x){this.fb=e,this.studentService=t,this.toastService=n,this.formValidator=p,this.router=x,this.isEditing=!1,this.isSubmitting=!1,this.branches=["CS","IT","EXTC","ECS","ELEC","Mech"],this.classes=["FE","SE","TE","BE"],this.honoursDegrees=["None","Data Science","AI&ML","Robotics","IoT"],this.destroy$=new T}ngOnInit(){this.initializeForm(),this.isEditing&&this.student&&this.studentForm.patchValue({name:this.student.name,branch:this.student.branch,class:this.student.class,rollNo:this.student.rollNo,honoursDegree:this.student.honoursDegree,email:this.student.email})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){this.studentForm=this.fb.group({name:["",[d.required,d.minLength(3),d.maxLength(50)]],branch:["CS",[d.required]],class:["FE",[d.required]],rollNo:[null,[d.required,this.formValidator.rollNumberValidator()]],honoursDegree:["None",[d.required]],email:["",[d.required,d.email,this.formValidator.collegeEmailValidator()]]})}isFieldInvalid(e){let t=this.studentForm.get(e);return!!(t&&t.invalid&&(t.dirty||t.touched))}getErrorMessage(e){let t=this.studentForm.get(e);return this.formValidator.getErrorMessage(t,e)}onSubmit(){if(this.studentForm.invalid){Object.keys(this.studentForm.controls).forEach(n=>{this.studentForm.get(n)?.markAsTouched()});return}this.isSubmitting=!0;let e=this.studentForm.value,t;try{this.isEditing&&this.student?t=this.studentService.updateStudent(this.student.id,e):t=this.studentService.addStudent(e),t&&this.router.navigate(["/view"])}finally{this.isSubmitting=!1}}navigateToView(){this.router.navigate(["/view"])}static{this.\u0275fac=function(t){return new(t||i)(u(K),u(te),u(ee),u(ae),u($))}}static{this.\u0275cmp=f({type:i,selectors:[["app-student-form"]],inputs:{student:"student",isEditing:"isEditing"},standalone:!0,features:[C],decls:48,vars:11,consts:[[1,"w-full","max-w-md","mx-auto","animate-scale-in","glass-card","hover:shadow-lg"],[3,"ngSubmit","formGroup"],[1,"space-y-5"],[1,"space-y-2.5"],["htmlFor","name"],["formControlName","name","placeholder","Enter student name",3,"className"],["class","text-sm text-destructive mt-1",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-5"],["htmlFor","branch"],["formControlName","branch"],[3,"value"],["htmlFor","class"],["formControlName","class"],["htmlFor","rollNo"],["type","number","formControlName","rollNo","placeholder","Enter roll number",3,"className"],["htmlFor","honoursDegree"],["formControlName","honoursDegree"],["htmlFor","email"],["type","email","formControlName","email","placeholder","Enter college email",3,"className"],[1,"flex","justify-between","pt-2"],["type","button","variant","outline",3,"onClick"],["type","submit",3,"disabled"],[1,"text-sm","text-destructive","mt-1"]],template:function(t,n){t&1&&(o(0,"app-card",0)(1,"app-card-header")(2,"app-card-title"),s(3),r(),o(4,"app-card-description"),s(5),r()(),o(6,"form",1),v("ngSubmit",function(){return n.onSubmit()}),o(7,"app-card-content",2)(8,"div",3)(9,"app-label",4),s(10,"Full Name"),r(),c(11,"app-input",5),S(12,le,2,1,"p",6),r(),o(13,"div",7)(14,"div",3)(15,"app-label",8),s(16,"Branch"),r(),o(17,"app-select",9),F(18,de,2,2,"app-option",10,E),r()(),o(20,"div",3)(21,"app-label",11),s(22,"Class"),r(),o(23,"app-select",12),F(24,me,2,2,"app-option",10,E),r()()(),o(26,"div",7)(27,"div",3)(28,"app-label",13),s(29,"Roll No."),r(),c(30,"app-input",14),S(31,pe,2,1,"p",6),r(),o(32,"div",3)(33,"app-label",15),s(34,"Honours Degree"),r(),o(35,"app-select",16),F(36,ue,2,2,"app-option",10,E),r()()(),o(38,"div",3)(39,"app-label",17),s(40,"College Email"),r(),c(41,"app-input",18),S(42,ce,2,1,"p",6),r()(),o(43,"app-card-footer",19)(44,"app-button",20),v("onClick",function(){return n.navigateToView()}),s(45," Cancel "),r(),o(46,"app-button",21),s(47),r()()()()),t&2&&(a(3),g(n.isEditing?"Edit Student":"Add New Student"),a(2),h(" ",n.isEditing?"Update the student information":"Enter the details of the new student"," "),a(),l("formGroup",n.studentForm),a(5),l("className",n.isFieldInvalid("name")?"border-destructive":""),a(),l("ngIf",n.isFieldInvalid("name")),a(6),y(n.branches),a(6),y(n.classes),a(6),l("className",n.isFieldInvalid("rollNo")?"border-destructive":""),a(),l("ngIf",n.isFieldInvalid("rollNo")),a(5),y(n.honoursDegrees),a(5),l("className",n.isFieldInvalid("email")?"border-destructive":""),a(),l("ngIf",n.isFieldInvalid("email")),a(4),l("disabled",n.studentForm.invalid||n.studentForm.pristine||n.isSubmitting),a(),h(" ",n.isEditing?"Update Student":"Add Student"," "))},dependencies:[b,j,Q,H,U,Z,X,J,G,W,Y,re,oe,q,R,L,A,B,P],styles:["[_nghost-%COMP%]{display:block}form[_ngcontent-%COMP%]{transition:all .3s ease}"]})}}return i})();export{Oe as a};
