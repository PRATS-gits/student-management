import{a as O}from"./chunk-QJIBU3BZ.js";import{a as B}from"./chunk-ILLBSOCN.js";import"./chunk-XAZLOLJU.js";import{k as A,n as $}from"./chunk-R3XHQFXV.js";import{a as Q}from"./chunk-OTWRRM26.js";import{a as F,b as R,c as T,d as k,e as N}from"./chunk-S4B2MDIS.js";import{e as V}from"./chunk-ES3DDTL4.js";import{Fb as E,Gb as y,Hb as I,Ja as _,La as d,Lb as j,Sa as t,Ta as n,X as b,Xa as w,Ya as c,Za as u,da as v,ea as g,fb as i,gb as p,hb as S,jb as D,wa as o,xa as C}from"./chunk-XBW5HTEE.js";function M(s,h){if(s&1&&(t(0,"span",22),i(1),n()),s&2){let e=u();o(),S(" ",e.sortDirection==="asc"?"\u2191":"\u2193"," ")}}function H(s,h){if(s&1&&(t(0,"span",22),i(1),n()),s&2){let e=u();o(),S(" ",e.sortDirection==="asc"?"\u2191":"\u2193"," ")}}function L(s,h){if(s&1&&(t(0,"span",22),i(1),n()),s&2){let e=u();o(),S(" ",e.sortDirection==="asc"?"\u2191":"\u2193"," ")}}function U(s,h){s&1&&(t(0,"tr")(1,"td",23),i(2," No student records found "),n()())}function q(s,h){if(s&1){let e=w();t(0,"tr",24)(1,"td",25),i(2),n(),t(3,"td",26),i(4),n(),t(5,"td",26),i(6),n(),t(7,"td",26),i(8),n(),t(9,"td",26),i(10),n(),t(11,"td",27),i(12),n(),t(13,"td",26)(14,"div",28)(15,"app-button",29),c("onClick",function(){let r=v(e).$implicit,a=u();return g(a.handleEdit(r.id))}),i(16," \u270F\uFE0F "),n(),t(17,"app-button",30),c("onClick",function(){let r=v(e).$implicit,a=u();return g(a.handleDelete(r.id))}),i(18," \u{1F5D1}\uFE0F "),n()()()()}if(s&2){let e=h.$implicit;o(2),p(e.name),o(2),p(e.branch),o(2),p(e.class),o(2),p(e.rollNo),o(2),p(e.honoursDegree),o(2),p(e.email)}}var ne=(()=>{class s{constructor(e,l,r){this.router=e,this.studentService=l,this.toastService=r,this.students=[],this.filteredStudents=[],this.sortedStudents=[],this.searchQuery="",this.sortField="name",this.sortDirection="asc",this.deleteId=null}ngOnInit(){this.loadStudents(),this.studentService.students$.subscribe(e=>{this.students=e,this.applyFilters()}),this.studentService.filteredStudents$.subscribe(e=>{this.filteredStudents=e,this.sortStudents()}),this.studentService.searchQuery$.subscribe(e=>{this.searchQuery=e})}loadStudents(){this.studentService.loadStudents()}onSearchChange(e){this.studentService.searchStudents(e)}handleSort(e){e===this.sortField?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortField=e,this.sortDirection="asc"),this.sortStudents()}sortStudents(){this.sortedStudents=[...this.filteredStudents].sort((e,l)=>e[this.sortField]<l[this.sortField]?this.sortDirection==="asc"?-1:1:e[this.sortField]>l[this.sortField]?this.sortDirection==="asc"?1:-1:0)}applyFilters(){this.searchQuery?this.studentService.searchStudents(this.searchQuery):(this.filteredStudents=this.students,this.sortStudents())}handleEdit(e){this.router.navigate(["/edit",e])}handleDelete(e){this.deleteId=e}confirmDelete(){this.deleteId&&(this.studentService.deleteStudent(this.deleteId)&&this.toastService.show({title:"Student Deleted",description:"Student record has been deleted successfully"}),this.deleteId=null)}cancelDelete(){this.deleteId=null}onAlertDialogOpenChange(e){e||(this.deleteId=null)}exportCSV(){let e=["Name","Branch","Class","Roll No","Honours Degree","Email"],l=this.sortedStudents.map(m=>[m.name,m.branch,m.class,m.rollNo.toString(),m.honoursDegree,m.email]),r=[e.join(","),...l.map(m=>m.join(","))].join(`
`),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),f=URL.createObjectURL(a),x=document.createElement("a");x.setAttribute("href",f),x.setAttribute("download","student_records.csv"),x.click(),this.toastService.show({title:"Data Exported",description:"All student records have been exported to CSV"})}static{this.\u0275fac=function(l){return new(l||s)(C(V),C($),C(Q))}}static{this.\u0275cmp=b({type:s,selectors:[["app-view-records"]],standalone:!0,features:[D],decls:52,vars:10,consts:[[1,"container","max-w-6xl","mx-auto","px-4","py-8","page-transition"],[1,"text-center","mb-8"],[1,"text-3xl","font-bold","mb-2"],[1,"text-muted-foreground"],[1,"w-full","animate-scale-in","glass-card"],[1,"flex","justify-between","items-center"],["variant","outline","className","flex items-center gap-1",3,"onClick","disabled"],[1,"flex","mb-4"],[1,"relative","w-full"],[1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","h-4","w-4","text-muted-foreground"],["placeholder","Search by name, roll number, or email","className","pl-9",3,"valueChange","value"],[1,"rounded-md","border","overflow-hidden"],[1,"w-full","text-sm"],[1,"border-b","bg-muted/50"],[1,"h-12","px-4","text-left","align-middle","font-medium","cursor-pointer",3,"click"],[1,"flex","items-center"],["class","ml-1",4,"ngIf"],[1,"h-12","px-4","text-left","align-middle","font-medium"],[1,"h-12","px-4","text-right","align-middle","font-medium"],[4,"ngIf"],["class","border-b hover:bg-muted/50 transition-colors",4,"ngFor","ngForOf"],["title","Confirm Deletion","description","Are you sure you want to delete this student record? This action cannot be undone.","confirmText","Delete","cancelText","Cancel","confirmVariant","destructive",3,"onConfirm","onCancel","openChange","open","glassEffect"],[1,"ml-1"],["colspan","7",1,"text-center","py-6","text-muted-foreground"],[1,"border-b","hover:bg-muted/50","transition-colors"],[1,"p-4","align-middle","font-medium"],[1,"p-4","align-middle"],[1,"p-4","align-middle","max-w-[200px]","truncate"],[1,"flex","justify-end","gap-2"],["variant","outline","className","h-8 w-8",3,"onClick"],["variant","outline","className","h-8 w-8 text-destructive hover:text-destructive-foreground hover:bg-destructive",3,"onClick"]],template:function(l,r){l&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),i(3,"Student Records"),n(),t(4,"p",3),i(5," View and manage all student records "),n()(),t(6,"app-card",4)(7,"app-card-header")(8,"div",5)(9,"div")(10,"app-card-title"),i(11,"Student Records"),n(),t(12,"app-card-description"),i(13),n()(),t(14,"app-button",6),c("onClick",function(){return r.exportCSV()}),t(15,"span"),i(16,"\u{1F4E5}"),n(),i(17," Export CSV "),n()()(),t(18,"app-card-content")(19,"div",7)(20,"div",8)(21,"span",9),i(22,"\u{1F50D}"),n(),t(23,"app-input",10),c("valueChange",function(f){return r.onSearchChange(f)}),n()()(),t(24,"div",11)(25,"table",12)(26,"thead")(27,"tr",13)(28,"th",14),c("click",function(){return r.handleSort("name")}),t(29,"div",15),i(30," Name "),_(31,M,2,1,"span",16),n()(),t(32,"th",17),i(33,"Branch"),n(),t(34,"th",17),i(35,"Class"),n(),t(36,"th",14),c("click",function(){return r.handleSort("rollNo")}),t(37,"div",15),i(38," Roll No "),_(39,H,2,1,"span",16),n()(),t(40,"th",17),i(41,"Honours"),n(),t(42,"th",14),c("click",function(){return r.handleSort("email")}),t(43,"div",15),i(44," Email "),_(45,L,2,1,"span",16),n()(),t(46,"th",18),i(47,"Actions"),n()()(),t(48,"tbody"),_(49,U,3,0,"tr",19)(50,q,19,6,"tr",20),n()()()()(),t(51,"app-alert-dialog",21),c("onConfirm",function(){return r.confirmDelete()})("onCancel",function(){return r.cancelDelete()})("openChange",function(f){return r.onAlertDialogOpenChange(f)}),n()()),l&2&&(o(13),S(" ",r.students.length===0?"No student records found":"Showing "+r.filteredStudents.length+" student records"," "),o(),d("disabled",r.filteredStudents.length===0),o(9),d("value",r.searchQuery),o(8),d("ngIf",r.sortField==="name"),o(8),d("ngIf",r.sortField==="rollNo"),o(6),d("ngIf",r.sortField==="email"),o(4),d("ngIf",r.filteredStudents.length===0),o(),d("ngForOf",r.sortedStudents),o(),d("open",!!r.deleteId)("glassEffect",!0))},dependencies:[I,E,y,A,j,O,F,R,T,k,N,B],encapsulation:2})}}return s})();export{ne as ViewRecordsComponent};
